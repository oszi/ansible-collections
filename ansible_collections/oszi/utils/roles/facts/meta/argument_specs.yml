---
argument_specs:
  main:
    short_description: Fact gathering utility role
    description:
      - Gathers facts subset with configurable filtering
      - Compatible with implicit gathering, including `all` subset
      - Use as role dependencies to take advantage of dependency deduplication
    author:
      - "David O. (oszi.dev)"
    options: &options
      facts_subset:
        description:
          - List of explicit gather subsets for M(ansible.builtin.setup)
          - Implies `!all` and `!min` unless explicitly specified
          - With implicit gathering, if not `all`, set the same subset as default
          - Default is `min` and `virtual`
        type: list
        elements: str
        required: false

      facts_filter:
        description:
          - If supplied, only return facts that match one of the shell-style (fnmatch) patterns
          - Avoid if possible, disables caching and complicates dependency deduplication
          - Patterns must not return `gather_subset` to avoid cache confusion
        type: list
        elements: str
        required: false

  facts:
    short_description: Direct entrypoint for fact gathering
    description:
      - Does not apply `always` or any other tag, unlike entrypoint `main`
    options:
      <<: *options

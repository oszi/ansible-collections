---
argument_specs:
  main:
    short_description: Workstation desktop system configuration and package management
    description:
      - Configures packages and settings for workstation desktop systems
      - Manages desktop applications, security tools, and hardware-specific configurations
      - The supported desktop environment is Gnome Shell
    author:
      - "David O. (oszi.dev)"
    options:
      workstation_packages:
        description:
          - Nested list of package names to install on workstation systems
          - Includes desktop applications and hardware utilities (see the toolbox role for development tools)
          - Supports platform-specific package selection based on distribution and virtualization role with the defaults
        type: list
        elements: raw
        required: false
        default: "{{ workstation_packages_pt_default }}"

      workstation_packages_pt_default:
        description:
          - Default platform-specific package list for workstation systems
          - Contains language support (hunspell), smartcard tools (pcscd, pcsc-lite)
          - Includes hardware utilities only for physical machines (ddccontrol, i2c-tools, ltunify, piper)
          - Desktop applications (firewall-config, gparted, keepassxc, remmina, wireshark, etc.)
        type: list
        elements: raw
        required: false

      workstation_blacklisted_packages:
        description:
          - Nested list of package names to remove from workstation systems
          - Combines packages for sandboxing, office suites, and installer components
          - Removes browsers, containers, and apps better run in flatpak/snap for security
        type: list
        elements: raw
        required: false
        default:
          - "{{ workstation_blacklisted_packages_pt_to_sandbox }}"
          - "{{ workstation_blacklisted_packages_pt_office }}"
          - "{{ workstation_blacklisted_packages_pt_anaconda if (ansible_facts.os_family == 'RedHat') else [] }}"

      workstation_blacklisted_packages_pt_to_sandbox:
        description:
          - Packages to remove that should run in sandboxed environments (flatpak/snap/VMs)
          - Includes browsers (firefox, chromium) and other desktop apps
          - Removes apport to protect kernel.core_pattern on Debian/Ubuntu systems
        type: list
        elements: raw
        required: false

      workstation_blacklisted_packages_pt_office:
        description:
          - Office and productivity suite packages to remove from workstations
          - Includes LibreOffice, Evolution email client, and Evince document viewer
          - These applications are typically better installed via flatpak or in VMs
        type: list
        elements: raw
        required: false

      workstation_blacklisted_packages_pt_anaconda:
        description:
          - RedHat/Fedora installer (anaconda) components to remove from installed systems
          - Unnecessary on most systems after installation is complete
          - Only applies to RedHat family distributions
        type: list
        elements: raw
        required: false

      workstation_local_bin_path:
        description:
          - Directory path for local executable scripts for workstations
          - Must be in the system PATH for scripts to be accessible
        type: path
        required: false
        default: "{{ local_bin_path | default('/usr/local/bin', true) }}"

      workstation_hid_apple_options:
        description:
          - Configuration options for the hid_apple kernel module
          - Controls behavior of Apple keyboards (including Keychron keyboards)
          - Each key is a module parameter name (e.g., fnmode) and each value is the setting
        type: dict
        required: false
        default:
          fnmode: 2
        options:
          fnmode:
            description:
              - Function key mode for Apple keyboards
              - 0=disabled, 1=fkeyslast (Fn+F* for F keys), 2=fkeysfirst (F* for F keys, Fn+F* for special)
              - For Keychron keyboards in Windows mode fkeyslast vs fkeysfirst could be reversed
            type: int
            required: false
            choices: [0, 1, 2]
          iso_layout:
            description:
              - Whether to use ISO keyboard layout
            type: int
            required: false
            choices: [0, 1]
          swap_opt_cmd:
            description:
              - Whether to swap Option and Command keys
            type: int
            required: false
            choices: [0, 1]
          swap_fn_leftctrl:
            description:
              - Whether to swap Fn and left Control keys
            type: int
            required: false
            choices: [0, 1]

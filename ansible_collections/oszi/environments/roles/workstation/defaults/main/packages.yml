---
# See also: environments/roles/toolbox/defaults/main/packages.yml
# and general/roles/gnome/defaults/main/packages.yml

# Nested list of packages to install on workstations:
workstation_packages: "{{ workstation_packages_pt_default }}"

# Fedora/Debian/Ubuntu defaults to include in workstation_packages:
workstation_packages_pt_default:
  - "{{ workstation_packages_pt_hardware if ansible_facts.virtualization_role != 'guest' else [] }}"
  - "{{ [
      'hunspell-en-gb',
      'hunspell-en-us',
      'hunspell-hu',
      'pcscd',
      'scdaemon',
    ]
    if (ansible_facts.os_family == 'Debian')
    else [
      'hunspell-en',
      'hunspell-hu',
      'pcsc-lite',
    ] }}"
  # [All distributions]
  - efitools
  - firewall-config
  - gamemode
  - gparted
  - keepassxc
  - mesa-vulkan-drivers
  - pcsc-tools
  - powertop
  - remmina
  - tilix
  - wireshark
  - xclip
  - yubikey-manager

# Fedora/Debian/Ubuntu hardware-related default packages:
workstation_packages_pt_hardware:
  - ddccontrol
  - i2c-tools
  - ltunify
  - piper

# Packages to remove from workstations (Fedora/Debian/Ubuntu):
workstation_blacklisted_packages:
  - "{{ workstation_blacklisted_packages_pt_to_sandbox }}"
  - "{{ workstation_blacklisted_packages_pt_imagemagick if ansible_facts.virtualization_role != 'guest' else [] }}"
  - "{{ workstation_blacklisted_packages_pt_office }}"
  - "{{ workstation_packages_pt_hardware if ansible_facts.virtualization_role == 'guest' else [] }}"
  - apport  # Protect kernel.core_pattern on Debian/Ubuntu!
  - peek  # Replaced by gnome-screenshot video.

# Use the latest Chromium flatpak or snap with hardened configuration.
# On Debian, the default firefox-esr cannot be removed without installing another browser.
workstation_blacklisted_packages_pt_to_sandbox:
  - ['lxc', 'lxc-libs', 'liblxc-common']  # lxcbr0
  - barrier
  - bottles
  - chromium
  - chromium-codecs-ffmpeg  # Ubuntu
  - chromium-codecs-ffmpeg-extra
  - clementine
  - firefox
  - gimp
  - steam
  - transmission
  - wine

workstation_blacklisted_packages_pt_imagemagick:
  - ImageMagick
  - imagemagick
  - imagemagick-6-common
  - GraphicsMagick
  - graphicsmagick
  - libgraphicsmagick-q16-3

workstation_blacklisted_packages_pt_office:
  - evince
  - evince-common
  - evolution
  - evolution-common
  - evolution-langpacks
  - "{{ ['@libreoffice'] if (ansible_facts.os_family == 'RedHat') else [] }}"
  - libreoffice
  - libreoffice-common
  - libreoffice-core
  - libreoffice-data
  - libreoffice-opensymbol-fonts
  - libreoffice-ure-common
  - libreofficekit-data

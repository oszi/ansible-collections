---
- name: Gnome setup tasks
  tags: [gnome]
  block:
    - name: Gnome package setup tasks
      ansible.builtin.import_tasks:
        file: packages.yml

    - name: Include Gnome user setup tasks
      ansible.builtin.include_tasks:
        file: gnome-user.yml
        apply:
          become: true
          become_user: "{{ gnome_user_item }}"
      loop: "{{ gnome_users | unique }}"
      loop_control:
        loop_var: gnome_user_item

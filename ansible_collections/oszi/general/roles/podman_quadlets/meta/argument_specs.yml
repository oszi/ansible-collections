---
argument_specs:
  main:
    short_description: Podman quadlet systemd-generator unit management
    description:
      - Manages Podman quadlet files for systemd-based container orchestration
      - Supports .container, .kube, .pod, .image, .network, and other quadlet types
      - Provides lifecycle hooks for initialization and post-installation scripts
      - Generates systemd units from quadlet specifications
      - Supports rootless mode with systemd user scope
    author:
      - "David O. (oszi.dev)"
    options:
      podman_quadlets:
        description:
          - Dictionary of podman quadlet unit definitions
          - Keys are unit filenames (NAME.container, NAME.kube, NAME.pod, NAME.image, NAME.network, etc.)
          - Values are the quadlet unit file contents in systemd unit format
          - See https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html
        type: dict
        required: false
        default: {}

      podman_quadlets_copy_files:
        description:
          - Dictionary mapping quadlet unit names to lists of file copy operations
          - Each quadlet key maps to a list of dicts with ansible.builtin.copy module arguments
          - Use this to copy configuration files before quadlet installation
        type: dict
        required: false
        default: {}

      podman_quadlets_init_scripts:
        description:
          - Dictionary mapping quadlet unit names to inline shell initialization scripts
          - Scripts run once before installing with ansible.builtin.shell and -euo pipefail
          - Use for first-time setup tasks like volume creation or initial configuration
        type: dict
        required: false
        default: {}

      podman_quadlets_post_install_scripts:
        description:
          - Dictionary mapping quadlet unit names to inline shell post-installation scripts
          - Scripts run after the systemd unit was changed with ansible.builtin.shell and -euo pipefail
          - Use for post-install setup tasks that depend on the quadlet being active
        type: dict
        required: false
        default: {}
